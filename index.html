<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HabitCraft AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="app-title">HabitCraft AI</h1>
                <div class="header-controls">
                    <button class="icon-btn" id="theme-toggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
                        <span class="theme-icon">üåô</span>
                    </button>
                    <button class="icon-btn primary" id="add-habit-btn">
                        <span>+</span>
                    </button>
                </div>
            </div>
            <div class="daily-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="daily-progress-fill"></div>
                </div>
                <span class="progress-text" id="daily-progress-text">0% –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content" id="main-content">
            <!-- Today's Habits -->
            <section class="section today-section">
                <div class="section-header">
                    <h2>–°–µ–≥–æ–¥–Ω—è</h2>
                    <span class="date" id="today-date"></span>
                </div>
                <div class="habits-container" id="today-habits">
                    <!-- Habits will be rendered here -->
                </div>
            </section>

            <!-- AI Coach Section -->
            <section class="section ai-section">
                <div class="section-header">
                    <h2>AI –ö–æ—É—á</h2>
                    <div class="ai-credits" id="ai-credits">5 –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å</div>
                </div>
                <div class="ai-input-container">
                    <input 
                        type="text" 
                        id="ai-input" 
                        placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ —É AI —Å–æ–≤–µ—Ç–∞ –ø–æ –≤–∞—à–∏–º –ø—Ä–∏–≤—ã—á–∫–∞–º..."
                        class="ai-input"
                    >
                    <button class="ai-send-btn" id="ai-send-btn">
                        <span>‚û§</span>
                    </button>
                </div>
                <div class="ai-response" id="ai-response">
                    <div class="ai-placeholder">
                        <div class="ai-icon">ü§ñ</div>
                        <p>–Ø –≤–∞—à AI-–ø–æ–º–æ—â–Ω–∏–∫! –°–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω—è –æ –ø—Ä–∏–≤—ã—á–∫–∞—Ö, –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É.</p>
                    </div>
                </div>
            </section>

            <!-- Statistics -->
            <section class="section stats-section">
                <div class="section-header">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <button class="text-btn" id="view-all-stats">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-habits">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–∏–≤—ã—á–µ–∫</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="completion-rate">0%</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="current-streak">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Add Habit Modal -->
        <div class="modal-overlay" id="add-habit-modal">
            <div class="modal">
                <div class="modal-header">
                    <h3>–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≤—ã—á–∫—É</h3>
                    <button class="close-btn" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="tab-container">
                        <div class="tabs">
                            <button class="tab active" data-tab="manual">–í—Ä—É—á–Ω—É—é</button>
                            <button class="tab" data-tab="ai">–° –ø–æ–º–æ—â—å—é AI</button>
                        </div>
                        
                        <div class="tab-content active" id="manual-tab">
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏</label>
                                <input type="text" id="habit-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, –£—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞">
                            </div>
                            <div class="form-group">
                                <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                                <textarea id="habit-description" placeholder="–ü–æ—á–µ–º—É —ç—Ç–∞ –ø—Ä–∏–≤—ã—á–∫–∞ –≤–∞–∂–Ω–∞ –¥–ª—è –≤–∞—Å?"></textarea>
                            </div>
                            <div class="form-group">
                                <label>–¶–≤–µ—Ç</label>
                                <div class="color-picker">
                                    <div class="color-option selected" data-color="#4CAF50"></div>
                                    <div class="color-option" data-color="#2196F3"></div>
                                    <div class="color-option" data-color="#FF9800"></div>
                                    <div class="color-option" data-color="#9C27B0"></div>
                                    <div class="color-option" data-color="#F44336"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ</label>
                                <div class="frequency-selector">
                                    <button class="frequency-btn active" data-frequency="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</button>
                                    <button class="frequency-btn" data-frequency="weekdays">–ü–æ –±—É–¥–Ω—è–º</button>
                                    <button class="frequency-btn" data-frequency="weekly">–ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º</button>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="ai-tab">
                            <div class="ai-generation">
                                <div class="form-group">
                                    <label>–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –ø—Ä–∏–≤—ã—á–∫—É</label>
                                    <textarea 
                                        id="ai-habit-description" 
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –•–æ—á—É –Ω–∞—á–∞—Ç—å –±–µ–≥–∞—Ç—å –ø–æ —É—Ç—Ä–∞–º 3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ"
                                        rows="4"
                                    ></textarea>
                                </div>
                                <button class="btn-secondary full-width" id="generate-with-ai">
                                    <span class="loading-spinner" id="ai-loading-spinner" style="display: none;"></span>
                                    <span id="generate-text">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å AI</span>
                                </button>
                                <div class="ai-suggestion" id="ai-suggestion" style="display: none;">
                                    <div class="suggestion-header">
                                        <span>AI –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</span>
                                        <button class="text-btn small" id="use-suggestion">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                                    </div>
                                    <div class="suggestion-content">
                                        <h4 id="suggestion-name"></h4>
                                        <p id="suggestion-description"></p>
                                        <div class="suggestion-meta">
                                            <span class="color-badge" id="suggestion-color"></span>
                                            <span id="suggestion-frequency"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancel-habit">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-primary" id="save-habit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É</button>
                </div>
            </div>
        </div>

        <!-- Stats Modal -->
        <div class="modal-overlay" id="stats-modal">
            <div class="modal large">
                <div class="modal-header">
                    <h3>–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <button class="close-btn" id="close-stats">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="stats-container">
                        <div class="calendar-view" id="calendar-view"></div>
                        <div class="habits-stats" id="habits-stats"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="empty-state">
            <div class="empty-icon">üåü</div>
            <h3>–ù–∞—á–Ω–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∫ –ª—É—á—à–∏–º –ø—Ä–∏–≤—ã—á–∫–∞–º</h3>
            <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å —Å –ø–æ–º–æ—â—å—é AI-–∫–æ—É—á–∞</p>
            <button class="btn-primary large" id="create-first-habit">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="modules/storage.js"></script>
    <script src="modules/habit-manager.js"></script>
    <script src="modules/ai-coach.js"></script>
    <script src="modules/ui-engine.js"></script>
    <script src="app.js"></script>
</body>
</html>